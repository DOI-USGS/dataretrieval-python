

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>USGS dataretrieval Python Package get_gwlevels() Examples &mdash; dataretrieval 0.1.dev1+gad478045b documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=4b5feb02"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="USGS dataretrieval Python Package get_discharge_measurements() Examples" href="USGS_dataretrieval_Measurements_Examples.html" />
    <link rel="prev" title="USGS dataretrieval Python Package get_dv() Examples" href="USGS_dataretrieval_DailyValues_Examples.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            dataretrieval
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../meta/installing.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/index.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#simple-uses-of-the-dataretrieval-package">Simple uses of the <code class="docutils literal notranslate"><span class="pre">dataretrieval</span></code> package</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#example-notebooks-from-hydroshare">Example Notebooks from Hydroshare</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="USGS_dataretrieval_DailyValues_Examples.html">USGS dataretrieval Python Package <code class="docutils literal notranslate"><span class="pre">get_dv()</span></code> Examples</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">USGS dataretrieval Python Package <code class="docutils literal notranslate"><span class="pre">get_gwlevels()</span></code> Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Install-the-Package">Install the Package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Basic-Usage">Basic Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Interpreting-the-Result">Interpreting the Result</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Additional-Examples">Additional Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="USGS_dataretrieval_Measurements_Examples.html">USGS dataretrieval Python Package <code class="docutils literal notranslate"><span class="pre">get_discharge_measurements()</span></code> Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="USGS_dataretrieval_ParameterCodes_Examples.html">USGS dataretrieval Python Package <code class="docutils literal notranslate"><span class="pre">get_pmcodes()</span></code> Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="USGS_dataretrieval_Peaks_Examples.html">USGS dataretrieval Python Package <code class="docutils literal notranslate"><span class="pre">get_discharge_peaks()</span></code> Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="USGS_dataretrieval_Ratings_Examples.html">USGS dataretrieval Python Package <code class="docutils literal notranslate"><span class="pre">get_ratings()</span></code> Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="USGS_dataretrieval_SiteInfo_Examples.html">USGS dataretrieval Python Package <code class="docutils literal notranslate"><span class="pre">get_info()</span></code> Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="USGS_dataretrieval_SiteInventory_Examples.html">USGS dataretrieval Python Package <code class="docutils literal notranslate"><span class="pre">what_sites()</span></code> Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="USGS_dataretrieval_Statistics_Examples.html">USGS dataretrieval Python Package <code class="docutils literal notranslate"><span class="pre">get_stats()</span></code> Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="USGS_dataretrieval_UnitValues_Examples.html">USGS dataretrieval Python Package <code class="docutils literal notranslate"><span class="pre">get_iv()</span></code> Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="USGS_dataretrieval_WaterSamples_Examples.html">USGS dataretrieval Python Package <code class="docutils literal notranslate"><span class="pre">get_samples()</span></code> Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="USGS_dataretrieval_WaterUse_Examples.html">USGS dataretrieval Python Package <code class="docutils literal notranslate"><span class="pre">get_water_use()</span></code> Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#using-dataretrieval-to-obtain-nation-trends-in-peak-annual-streamflow">Using <code class="docutils literal notranslate"><span class="pre">dataretrieval</span></code> to obtain nation trends in peak annual streamflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#duplicating-the-r-dataretrieval-vignettes-functionality">Duplicating the R <code class="docutils literal notranslate"><span class="pre">dataRetrieval</span></code> vignettes functionality</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../meta/contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../meta/license.html">License and Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">API reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">dataretrieval</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Examples</a></li>
      <li class="breadcrumb-item active">USGS dataretrieval Python Package <code class="docutils literal notranslate"><span class="pre">get_gwlevels()</span></code> Examples</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/USGS_dataretrieval_GroundwaterLevels_Examples.nblink.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="USGS-dataretrieval-Python-Package-get_gwlevels()-Examples">
<h1>USGS dataretrieval Python Package <code class="docutils literal notranslate"><span class="pre">get_gwlevels()</span></code> Examples<a class="headerlink" href="#USGS-dataretrieval-Python-Package-get_gwlevels()-Examples" title="Link to this heading"></a></h1>
<p>This notebook provides examples of using the Python dataretrieval package to retrieve groundwater level data for a United States Geological Survey (USGS) monitoring site. The dataretrieval package provides a collection of functions to get data from the USGS National Water Information System (NWIS) and other online sources of hydrology and water quality data, including the United States Environmental Protection Agency (USEPA).</p>
<section id="Install-the-Package">
<h2>Install the Package<a class="headerlink" href="#Install-the-Package" title="Link to this heading"></a></h2>
<p>Use the following code to install the package if it doesn’t exist already within your Jupyter Python environment.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>dataretrieval
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Defaulting to user installation because normal site-packages is not writeable
Requirement already satisfied: dataretrieval in /home/runner/.local/lib/python3.12/site-packages (0.1.dev1+gad478045b)
Requirement already satisfied: requests in /usr/lib/python3/dist-packages (from dataretrieval) (2.31.0)
Requirement already satisfied: pandas==2.* in /home/runner/.local/lib/python3.12/site-packages (from dataretrieval) (2.3.3)
Requirement already satisfied: numpy&gt;=1.26.0 in /home/runner/.local/lib/python3.12/site-packages (from pandas==2.*-&gt;dataretrieval) (2.3.5)
Requirement already satisfied: python-dateutil&gt;=2.8.2 in /usr/lib/python3/dist-packages (from pandas==2.*-&gt;dataretrieval) (2.8.2)
Requirement already satisfied: pytz&gt;=2020.1 in /usr/lib/python3/dist-packages (from pandas==2.*-&gt;dataretrieval) (2024.1)
Requirement already satisfied: tzdata&gt;=2022.7 in /home/runner/.local/lib/python3.12/site-packages (from pandas==2.*-&gt;dataretrieval) (2025.2)
</pre></div></div>
</div>
<p>Load the package so you can use it along with other packages used in this notebook.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dataretrieval</span> <span class="kn">import</span> <span class="n">nwis</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>
</pre></div>
</div>
</div>
</section>
<section id="Basic-Usage">
<h2>Basic Usage<a class="headerlink" href="#Basic-Usage" title="Link to this heading"></a></h2>
<p>The dataretrieval package has several functions that allow you to retrieve data from different web services. This examples uses the <code class="docutils literal notranslate"><span class="pre">get_gwlevels()</span></code> function to retrieve groundwater level data from USGS NWIS. The following arguments are supported:</p>
<p>Arguments (Additional parameters, if supplied, will be used as query parameters)</p>
<ul class="simple">
<li><p><strong>sites</strong> (string or list of strings): A list of USGS site identifiers for which to retrieve data.</p></li>
<li><p><strong>start</strong> (string): The beginning date for a period for which to retrieve data. If the waterdata parameter begin_date is supplied, it will overwrite the start parameter (defaults to ‘1851-01-01’)</p></li>
<li><p><strong>end</strong> (string): The ending date for a period for which to retrieve data. If the waterdata parameter end_date is supplied, it will overwrite the end parameter.</p></li>
</ul>
<p>Example 1: Get groundwater level data for a single monitoring site.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set the parameters needed to retrieve data</span>
<span class="n">site_id</span> <span class="o">=</span> <span class="s2">&quot;434400121275801&quot;</span>

<span class="c1"># Retrieve the data</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">nwis</span><span class="o">.</span><span class="n">get_gwlevels</span><span class="p">(</span><span class="n">sites</span><span class="o">=</span><span class="n">site_id</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Retrieved &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">+</span> <span class="s2">&quot; data values.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Retrieved 744 data values.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/runner/.local/lib/python3.12/site-packages/dataretrieval/utils.py:90: UserWarning: Warning: 567 incomplete dates found, consider setting datetime_index to False.
  warnings.warn(
</pre></div></div>
</div>
</section>
<section id="Interpreting-the-Result">
<h2>Interpreting the Result<a class="headerlink" href="#Interpreting-the-Result" title="Link to this heading"></a></h2>
<p>The result of calling the <code class="docutils literal notranslate"><span class="pre">get_gwlevels()</span></code> function is an object that contains a Pandas data frame and an associated metadata object. The Pandas data frame contains the data requested. The data frame is indexed by the dates associated with the data values.</p>
<p>Once you’ve got the data frame, there’s several useful things you can do to explore the data.</p>
<p>Display the data frame as a table</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>agency_cd</th>
      <th>site_no</th>
      <th>site_tp_cd</th>
      <th>lev_dt</th>
      <th>lev_tm</th>
      <th>lev_tz_cd</th>
      <th>lev_va</th>
      <th>sl_lev_va</th>
      <th>sl_datum_cd</th>
      <th>lev_status_cd</th>
      <th>lev_agency_cd</th>
      <th>lev_dt_acy_cd</th>
      <th>lev_acy_cd</th>
      <th>lev_src_cd</th>
      <th>lev_meth_cd</th>
      <th>lev_age_cd</th>
      <th>parameter_cd</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1945-10-12 22:35:00+00:00</th>
      <td>USGS</td>
      <td>434400121275801</td>
      <td>GW</td>
      <td>1945-10-12</td>
      <td>22:35</td>
      <td>+0000</td>
      <td>NaN</td>
      <td>4192.65</td>
      <td>NGVD29</td>
      <td>1</td>
      <td>USGS</td>
      <td>m</td>
      <td>2</td>
      <td>S</td>
      <td>O</td>
      <td>A</td>
      <td>62610</td>
    </tr>
    <tr>
      <th>1945-10-12 22:35:00+00:00</th>
      <td>USGS</td>
      <td>434400121275801</td>
      <td>GW</td>
      <td>1945-10-12</td>
      <td>22:35</td>
      <td>+0000</td>
      <td>NaN</td>
      <td>4196.67</td>
      <td>NAVD88</td>
      <td>1</td>
      <td>USGS</td>
      <td>m</td>
      <td>2</td>
      <td>S</td>
      <td>O</td>
      <td>A</td>
      <td>62611</td>
    </tr>
    <tr>
      <th>1945-10-12 22:35:00+00:00</th>
      <td>USGS</td>
      <td>434400121275801</td>
      <td>GW</td>
      <td>1945-10-12</td>
      <td>22:35</td>
      <td>+0000</td>
      <td>27.35</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1</td>
      <td>USGS</td>
      <td>m</td>
      <td>2</td>
      <td>S</td>
      <td>O</td>
      <td>A</td>
      <td>72019</td>
    </tr>
    <tr>
      <th>1999-06-04 18:00:00+00:00</th>
      <td>USGS</td>
      <td>434400121275801</td>
      <td>GW</td>
      <td>1999-06-04</td>
      <td>18:00</td>
      <td>+0000</td>
      <td>NaN</td>
      <td>4203.22</td>
      <td>NGVD29</td>
      <td>1</td>
      <td>USGS</td>
      <td>m</td>
      <td>2</td>
      <td>S</td>
      <td>S</td>
      <td>A</td>
      <td>62610</td>
    </tr>
    <tr>
      <th>1999-06-04 18:00:00+00:00</th>
      <td>USGS</td>
      <td>434400121275801</td>
      <td>GW</td>
      <td>1999-06-04</td>
      <td>18:00</td>
      <td>+0000</td>
      <td>NaN</td>
      <td>4207.24</td>
      <td>NAVD88</td>
      <td>1</td>
      <td>USGS</td>
      <td>m</td>
      <td>2</td>
      <td>S</td>
      <td>S</td>
      <td>A</td>
      <td>62611</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>NaT</th>
      <td>USGS</td>
      <td>434400121275801</td>
      <td>GW</td>
      <td>1999-03-19</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4204.97</td>
      <td>NAVD88</td>
      <td>1</td>
      <td>NaN</td>
      <td>D</td>
      <td>2</td>
      <td>NaN</td>
      <td>S</td>
      <td>A</td>
      <td>62611</td>
    </tr>
    <tr>
      <th>NaT</th>
      <td>USGS</td>
      <td>434400121275801</td>
      <td>GW</td>
      <td>1999-03-19</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>19.05</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1</td>
      <td>NaN</td>
      <td>D</td>
      <td>2</td>
      <td>NaN</td>
      <td>S</td>
      <td>A</td>
      <td>72019</td>
    </tr>
    <tr>
      <th>NaT</th>
      <td>USGS</td>
      <td>434400121275801</td>
      <td>GW</td>
      <td>1999-05-14</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4201.99</td>
      <td>NGVD29</td>
      <td>1</td>
      <td>USGS</td>
      <td>D</td>
      <td>2</td>
      <td>S</td>
      <td>S</td>
      <td>A</td>
      <td>62610</td>
    </tr>
    <tr>
      <th>NaT</th>
      <td>USGS</td>
      <td>434400121275801</td>
      <td>GW</td>
      <td>1999-05-14</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4206.01</td>
      <td>NAVD88</td>
      <td>1</td>
      <td>USGS</td>
      <td>D</td>
      <td>2</td>
      <td>S</td>
      <td>S</td>
      <td>A</td>
      <td>62611</td>
    </tr>
    <tr>
      <th>NaT</th>
      <td>USGS</td>
      <td>434400121275801</td>
      <td>GW</td>
      <td>1999-05-14</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>18.01</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1</td>
      <td>USGS</td>
      <td>D</td>
      <td>2</td>
      <td>S</td>
      <td>S</td>
      <td>A</td>
      <td>72019</td>
    </tr>
  </tbody>
</table>
<p>744 rows × 17 columns</p>
</div></div>
</div>
<p>Show the data types of the columns in the resulting data frame.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dtypes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
agency_cd         object
site_no           object
site_tp_cd        object
lev_dt            object
lev_tm            object
lev_tz_cd         object
lev_va           float64
sl_lev_va        float64
sl_datum_cd       object
lev_status_cd     object
lev_agency_cd     object
lev_dt_acy_cd     object
lev_acy_cd         int64
lev_src_cd        object
lev_meth_cd       object
lev_age_cd        object
parameter_cd      object
dtype: object
</pre></div></div>
</div>
<p>Get summary statistics for the daily streamflow values.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;lev_va&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
count    248.000000
mean      23.690605
std        5.265540
min       10.900000
25%       20.127500
50%       24.495000
75%       27.375000
max       41.630000
Name: lev_va, dtype: float64
</pre></div></div>
</div>
<p>Make a quick time series plot.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;lev_dt&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;lev_va&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Date&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Water Level (feet below land surface)&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0, 0.5, &#39;Water Level (feet below land surface)&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_USGS_dataretrieval_GroundwaterLevels_Examples_16_1.png" src="../_images/examples_USGS_dataretrieval_GroundwaterLevels_Examples_16_1.png" />
</div>
</div>
<p>The other part of the result returned from the <code class="docutils literal notranslate"><span class="pre">get_gwlevels()</span></code> function is a metadata object that contains information about the query that was executed to return the data. For example, you can access the URL that was assembled to retrieve the requested data from the USGS web service. The USGS web service responses contain a descriptive header that defines and can be helpful in interpreting the contents of the response.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The query URL used to retrieve the data from  NWIS was: &quot;</span> <span class="o">+</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
The query URL used to retrieve the data from  NWIS was: https://nwis.waterdata.usgs.gov/nwis/gwlevels?format=rdb&amp;begin_date=1851-01-01&amp;site_no=434400121275801
</pre></div></div>
</div>
</section>
<section id="Additional-Examples">
<h2>Additional Examples<a class="headerlink" href="#Additional-Examples" title="Link to this heading"></a></h2>
<p>You can also request data for multiple sites at the same time.</p>
<p>Example 2: Get data for multiple sites. Site numbers are specified using a comma delimited list of strings.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">site_ids</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;434400121275801&quot;</span><span class="p">,</span> <span class="s2">&quot;375907091432201&quot;</span><span class="p">]</span>
<span class="n">data2</span> <span class="o">=</span> <span class="n">nwis</span><span class="o">.</span><span class="n">get_gwlevels</span><span class="p">(</span><span class="n">sites</span><span class="o">=</span><span class="n">site_ids</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Retrieved &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data2</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">+</span> <span class="s2">&quot; data values.&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">data2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Retrieved 933 data values.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/runner/.local/lib/python3.12/site-packages/dataretrieval/utils.py:90: UserWarning: Warning: 621 incomplete dates found, consider setting datetime_index to False.
  warnings.warn(
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>agency_cd</th>
      <th>site_tp_cd</th>
      <th>lev_dt</th>
      <th>lev_tm</th>
      <th>lev_tz_cd</th>
      <th>lev_va</th>
      <th>sl_lev_va</th>
      <th>sl_datum_cd</th>
      <th>lev_status_cd</th>
      <th>lev_agency_cd</th>
      <th>lev_dt_acy_cd</th>
      <th>lev_acy_cd</th>
      <th>lev_src_cd</th>
      <th>lev_meth_cd</th>
      <th>lev_age_cd</th>
      <th>parameter_cd</th>
    </tr>
    <tr>
      <th>site_no</th>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">375907091432201</th>
      <th>2007-01-26 17:08:00+00:00</th>
      <td>USGS</td>
      <td>GW</td>
      <td>2007-01-26</td>
      <td>17:08</td>
      <td>+0000</td>
      <td>NaN</td>
      <td>871.79</td>
      <td>NGVD29</td>
      <td>1</td>
      <td>USGS</td>
      <td>m</td>
      <td>2</td>
      <td>S</td>
      <td>V</td>
      <td>A</td>
      <td>62610</td>
    </tr>
    <tr>
      <th>2007-01-26 17:08:00+00:00</th>
      <td>USGS</td>
      <td>GW</td>
      <td>2007-01-26</td>
      <td>17:08</td>
      <td>+0000</td>
      <td>NaN</td>
      <td>871.93</td>
      <td>NAVD88</td>
      <td>1</td>
      <td>USGS</td>
      <td>m</td>
      <td>2</td>
      <td>S</td>
      <td>V</td>
      <td>A</td>
      <td>62611</td>
    </tr>
    <tr>
      <th>2007-01-26 17:08:00+00:00</th>
      <td>USGS</td>
      <td>GW</td>
      <td>2007-01-26</td>
      <td>17:08</td>
      <td>+0000</td>
      <td>317.21</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1</td>
      <td>USGS</td>
      <td>m</td>
      <td>2</td>
      <td>S</td>
      <td>V</td>
      <td>A</td>
      <td>72019</td>
    </tr>
    <tr>
      <th>2007-06-11 19:30:00+00:00</th>
      <td>USGS</td>
      <td>GW</td>
      <td>2007-06-11</td>
      <td>19:30</td>
      <td>+0000</td>
      <td>NaN</td>
      <td>879.68</td>
      <td>NGVD29</td>
      <td>1</td>
      <td>MO005</td>
      <td>m</td>
      <td>2</td>
      <td>A</td>
      <td>T</td>
      <td>A</td>
      <td>62610</td>
    </tr>
    <tr>
      <th>2007-06-11 19:30:00+00:00</th>
      <td>USGS</td>
      <td>GW</td>
      <td>2007-06-11</td>
      <td>19:30</td>
      <td>+0000</td>
      <td>NaN</td>
      <td>879.82</td>
      <td>NAVD88</td>
      <td>1</td>
      <td>MO005</td>
      <td>m</td>
      <td>2</td>
      <td>A</td>
      <td>T</td>
      <td>A</td>
      <td>62611</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">434400121275801</th>
      <th>NaT</th>
      <td>USGS</td>
      <td>GW</td>
      <td>1999-03-19</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4204.97</td>
      <td>NAVD88</td>
      <td>1</td>
      <td>NaN</td>
      <td>D</td>
      <td>2</td>
      <td>NaN</td>
      <td>S</td>
      <td>A</td>
      <td>62611</td>
    </tr>
    <tr>
      <th>NaT</th>
      <td>USGS</td>
      <td>GW</td>
      <td>1999-03-19</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>19.05</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1</td>
      <td>NaN</td>
      <td>D</td>
      <td>2</td>
      <td>NaN</td>
      <td>S</td>
      <td>A</td>
      <td>72019</td>
    </tr>
    <tr>
      <th>NaT</th>
      <td>USGS</td>
      <td>GW</td>
      <td>1999-05-14</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4201.99</td>
      <td>NGVD29</td>
      <td>1</td>
      <td>USGS</td>
      <td>D</td>
      <td>2</td>
      <td>S</td>
      <td>S</td>
      <td>A</td>
      <td>62610</td>
    </tr>
    <tr>
      <th>NaT</th>
      <td>USGS</td>
      <td>GW</td>
      <td>1999-05-14</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4206.01</td>
      <td>NAVD88</td>
      <td>1</td>
      <td>USGS</td>
      <td>D</td>
      <td>2</td>
      <td>S</td>
      <td>S</td>
      <td>A</td>
      <td>62611</td>
    </tr>
    <tr>
      <th>NaT</th>
      <td>USGS</td>
      <td>GW</td>
      <td>1999-05-14</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>18.01</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1</td>
      <td>USGS</td>
      <td>D</td>
      <td>2</td>
      <td>S</td>
      <td>S</td>
      <td>A</td>
      <td>72019</td>
    </tr>
  </tbody>
</table>
<p>933 rows × 16 columns</p>
</div></div>
</div>
<p>The following example is the same as the previous example but with multi index turned off (multi_index=False)</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">site_ids</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;434400121275801&quot;</span><span class="p">,</span> <span class="s2">&quot;375907091432201&quot;</span><span class="p">]</span>
<span class="n">data2</span> <span class="o">=</span> <span class="n">nwis</span><span class="o">.</span><span class="n">get_gwlevels</span><span class="p">(</span><span class="n">sites</span><span class="o">=</span><span class="n">site_ids</span><span class="p">,</span> <span class="n">multi_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Retrieved &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data2</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">+</span> <span class="s2">&quot; data values.&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">data2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ParserError</span>                               Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[10]</span><span class="ansi-green-fg">, line 2</span>
<span class="ansi-green-fg">      1</span> site_ids = [<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">434400121275801</span><span class="ansi-yellow-fg">&#34;</span>, <span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">375907091432201</span><span class="ansi-yellow-fg">&#34;</span>]
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">2</span> data2 = <span class="ansi-yellow-bg">nwis</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">get_gwlevels</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">sites</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">site_ids</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">multi_index</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg ansi-bold" style="color: rgb(0,135,0)">False</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">      3</span> <span style="color: rgb(0,135,0)">print</span>(<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">Retrieved </span><span class="ansi-yellow-fg">&#34;</span> + <span style="color: rgb(0,135,0)">str</span>(<span style="color: rgb(0,135,0)">len</span>(data2[<span class="ansi-green-fg">0</span>])) + <span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg"> data values.</span><span class="ansi-yellow-fg">&#34;</span>)
<span class="ansi-green-fg">      4</span> display(data2[<span class="ansi-green-fg">0</span>])

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/.local/lib/python3.12/site-packages/dataretrieval/nwis.py:343</span>, in <span class="ansi-cyan-fg">get_gwlevels</span><span class="ansi-blue-fg">(sites, start, end, multi_index, datetime_index, ssl_check, **kwargs)</span>
<span class="ansi-green-fg">    339</span> kwargs[<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">multi_index</span><span class="ansi-yellow-fg">&#34;</span>] = multi_index
<span class="ansi-green-fg">    341</span> response = query_waterdata(<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">gwlevels</span><span class="ansi-yellow-fg">&#34;</span>, <span style="color: rgb(0,135,0)">format</span>=<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">rdb</span><span class="ansi-yellow-fg">&#34;</span>, ssl_check=ssl_check, **kwargs)
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">343</span> df = <span class="ansi-yellow-bg">_read_rdb</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">response</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">text</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    345</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> datetime_index <span class="ansi-bold" style="color: rgb(175,0,255)">is</span> <span class="ansi-bold" style="color: rgb(0,135,0)">True</span>:
<span class="ansi-green-fg">    346</span>     df = format_datetime(df, <span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">lev_dt</span><span class="ansi-yellow-fg">&#34;</span>, <span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">lev_tm</span><span class="ansi-yellow-fg">&#34;</span>, <span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">lev_tz_cd</span><span class="ansi-yellow-fg">&#34;</span>)

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/.local/lib/python3.12/site-packages/dataretrieval/nwis.py:1364</span>, in <span class="ansi-cyan-fg">_read_rdb</span><span class="ansi-blue-fg">(rdb)</span>
<span class="ansi-green-fg">   1355</span> fields = [field.replace(<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">,</span><span class="ansi-yellow-fg">&#34;</span>, <span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">&#34;</span>) <span class="ansi-bold" style="color: rgb(0,135,0)">for</span> field <span class="ansi-bold" style="color: rgb(175,0,255)">in</span> fields]
<span class="ansi-green-fg">   1356</span> dtypes = {
<span class="ansi-green-fg">   1357</span>     <span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">site_no</span><span class="ansi-yellow-fg">&#34;</span>: <span style="color: rgb(0,135,0)">str</span>,
<span class="ansi-green-fg">   1358</span>     <span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">dec_long_va</span><span class="ansi-yellow-fg">&#34;</span>: <span style="color: rgb(0,135,0)">float</span>,
<span class="ansi-green-fg">   (...)</span><span class="ansi-green-fg">   1361</span>     <span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">parameter_cd</span><span class="ansi-yellow-fg">&#34;</span>: <span style="color: rgb(0,135,0)">str</span>,
<span class="ansi-green-fg">   1362</span> }
<span class="ansi-green-fg">-&gt; </span><span class="ansi-green-fg">1364</span> df = <span class="ansi-yellow-bg">pd</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">read_csv</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg">   1365</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">StringIO</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">rdb</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1366</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">delimiter</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-fg ansi-yellow-bg">&#34;</span><span class="ansi-yellow-bg ansi-bold" style="color: rgb(175,95,0)">\t</span><span class="ansi-yellow-fg ansi-yellow-bg">&#34;</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1367</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">skiprows</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">count</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">+</span><span class="ansi-yellow-bg"> </span><span class="ansi-green-fg ansi-yellow-bg">2</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1368</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">names</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">fields</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1369</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">na_values</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-fg ansi-yellow-bg">&#34;</span><span class="ansi-yellow-fg ansi-yellow-bg">NaN</span><span class="ansi-yellow-fg ansi-yellow-bg">&#34;</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1370</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">dtype</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">dtypes</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">   1371</span> <span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">   1373</span> df = format_response(df)
<span class="ansi-green-fg">   1374</span> <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> df

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/.local/lib/python3.12/site-packages/pandas/io/parsers/readers.py:1026</span>, in <span class="ansi-cyan-fg">read_csv</span><span class="ansi-blue-fg">(filepath_or_buffer, sep, delimiter, header, names, index_col, usecols, dtype, engine, converters, true_values, false_values, skipinitialspace, skiprows, skipfooter, nrows, na_values, keep_default_na, na_filter, verbose, skip_blank_lines, parse_dates, infer_datetime_format, keep_date_col, date_parser, date_format, dayfirst, cache_dates, iterator, chunksize, compression, thousands, decimal, lineterminator, quotechar, quoting, doublequote, escapechar, comment, encoding, encoding_errors, dialect, on_bad_lines, delim_whitespace, low_memory, memory_map, float_precision, storage_options, dtype_backend)</span>
<span class="ansi-green-fg">   1013</span> kwds_defaults = _refine_defaults_read(
<span class="ansi-green-fg">   1014</span>     dialect,
<span class="ansi-green-fg">   1015</span>     delimiter,
<span class="ansi-green-fg">   (...)</span><span class="ansi-green-fg">   1022</span>     dtype_backend=dtype_backend,
<span class="ansi-green-fg">   1023</span> )
<span class="ansi-green-fg">   1024</span> kwds.update(kwds_defaults)
<span class="ansi-green-fg">-&gt; </span><span class="ansi-green-fg">1026</span> <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">_read</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">filepath_or_buffer</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">kwds</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/.local/lib/python3.12/site-packages/pandas/io/parsers/readers.py:626</span>, in <span class="ansi-cyan-fg">_read</span><span class="ansi-blue-fg">(filepath_or_buffer, kwds)</span>
<span class="ansi-green-fg">    623</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> parser
<span class="ansi-green-fg">    625</span> <span class="ansi-bold" style="color: rgb(0,135,0)">with</span> parser:
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">626</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">parser</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">read</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">nrows</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/.local/lib/python3.12/site-packages/pandas/io/parsers/readers.py:1923</span>, in <span class="ansi-cyan-fg">TextFileReader.read</span><span class="ansi-blue-fg">(self, nrows)</span>
<span class="ansi-green-fg">   1916</span> nrows = validate_integer(<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">nrows</span><span class="ansi-yellow-fg">&#34;</span>, nrows)
<span class="ansi-green-fg">   1917</span> <span class="ansi-bold" style="color: rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">   1918</span>     <span style="color: rgb(95,135,135)"># error: &#34;ParserBase&#34; has no attribute &#34;read&#34;</span>
<span class="ansi-green-fg">   1919</span>     (
<span class="ansi-green-fg">   1920</span>         index,
<span class="ansi-green-fg">   1921</span>         columns,
<span class="ansi-green-fg">   1922</span>         col_dict,
<span class="ansi-green-fg">-&gt; </span><span class="ansi-green-fg">1923</span>     ) = <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_engine</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">read</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">  </span><span class="ansi-yellow-bg" style="color: rgb(95,135,135)"># type: ignore[attr-defined]</span>
<span class="ansi-green-fg">   1924</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">nrows</span>
<span class="ansi-green-fg">   1925</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">   1926</span> <span class="ansi-bold" style="color: rgb(0,135,0)">except</span> <span class="ansi-bold" style="color: rgb(215,95,95)">Exception</span>:
<span class="ansi-green-fg">   1927</span>     <span style="color: rgb(0,135,0)">self</span>.close()

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/.local/lib/python3.12/site-packages/pandas/io/parsers/c_parser_wrapper.py:234</span>, in <span class="ansi-cyan-fg">CParserWrapper.read</span><span class="ansi-blue-fg">(self, nrows)</span>
<span class="ansi-green-fg">    232</span> <span class="ansi-bold" style="color: rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">    233</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> <span style="color: rgb(0,135,0)">self</span>.low_memory:
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">234</span>         chunks = <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_reader</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">read_low_memory</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">nrows</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    235</span>         <span style="color: rgb(95,135,135)"># destructive to chunks</span>
<span class="ansi-green-fg">    236</span>         data = _concatenate_chunks(chunks)

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">pandas/_libs/parsers.pyx:838</span>, in <span class="ansi-cyan-fg">pandas._libs.parsers.TextReader.read_low_memory</span><span class="ansi-blue-fg">()</span>

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">pandas/_libs/parsers.pyx:905</span>, in <span class="ansi-cyan-fg">pandas._libs.parsers.TextReader._read_rows</span><span class="ansi-blue-fg">()</span>

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">pandas/_libs/parsers.pyx:874</span>, in <span class="ansi-cyan-fg">pandas._libs.parsers.TextReader._tokenize_rows</span><span class="ansi-blue-fg">()</span>

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">pandas/_libs/parsers.pyx:891</span>, in <span class="ansi-cyan-fg">pandas._libs.parsers.TextReader._check_tokenize_status</span><span class="ansi-blue-fg">()</span>

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">pandas/_libs/parsers.pyx:2061</span>, in <span class="ansi-cyan-fg">pandas._libs.parsers.raise_parser_error</span><span class="ansi-blue-fg">()</span>

<span class="ansi-red-fg">ParserError</span>: Error tokenizing data. C error: Expected 1 fields in line 291, saw 4

</pre></div></div>
</div>
<p>Some groundwater level data have dates that include only a year or a month and year, but no day.</p>
<p>Example 3: Retrieve groundwater level data that have dates without a day.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data3</span> <span class="o">=</span> <span class="n">nwis</span><span class="o">.</span><span class="n">get_gwlevels</span><span class="p">(</span><span class="n">sites</span><span class="o">=</span><span class="s2">&quot;425957088141001&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Retrieved &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data3</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">+</span> <span class="s2">&quot; data values.&quot;</span><span class="p">)</span>

<span class="c1"># Print the date/time index values, which show up as NaT because</span>
<span class="c1"># the dates can&#39;t be converted to a date/time data type</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Retrieved 102 data values.
DatetimeIndex([&#39;NaT&#39;, &#39;NaT&#39;, &#39;NaT&#39;, &#39;NaT&#39;, &#39;NaT&#39;, &#39;NaT&#39;, &#39;NaT&#39;, &#39;NaT&#39;, &#39;NaT&#39;,
               &#39;NaT&#39;,
               ...
               &#39;NaT&#39;, &#39;NaT&#39;, &#39;NaT&#39;, &#39;NaT&#39;, &#39;NaT&#39;, &#39;NaT&#39;, &#39;NaT&#39;, &#39;NaT&#39;, &#39;NaT&#39;,
               &#39;NaT&#39;],
              dtype=&#39;datetime64[ns, UTC]&#39;, name=&#39;datetime&#39;, length=102, freq=None)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/runner/.local/lib/python3.12/site-packages/dataretrieval/utils.py:90: UserWarning: Warning: 102 incomplete dates found, consider setting datetime_index to False.
  warnings.warn(
</pre></div></div>
</div>
<p>If you want to see the USGS RDB (delimited text) version of the data just retrieved, you can get the URL for the request that was sent to the USGS web service.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print the URL used to retrieve the data</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You can examine the data retrieved from NWIS at: &quot;</span> <span class="o">+</span> <span class="n">data3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
You can examine the data retrieved from NWIS at: https://nwis.waterdata.usgs.gov/nwis/gwlevels?format=rdb&amp;begin_date=1851-01-01&amp;site_no=425957088141001
</pre></div></div>
</div>
<p>You can also retrieve data for a site within a specified time window by specifying a start date and an end date.</p>
<p>Example 4: Get groundwater level data for a site between a startDate and endDate.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data4</span> <span class="o">=</span> <span class="n">nwis</span><span class="o">.</span><span class="n">get_gwlevels</span><span class="p">(</span><span class="n">sites</span><span class="o">=</span><span class="n">site_id</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s2">&quot;1980-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2000-12-31&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Retrieved &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data4</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">+</span> <span class="s2">&quot; data values.&quot;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Retrieved 213 data values.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/runner/.local/lib/python3.12/site-packages/dataretrieval/utils.py:90: UserWarning: Warning: 189 incomplete dates found, consider setting datetime_index to False.
  warnings.warn(
</pre></div></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="USGS_dataretrieval_DailyValues_Examples.html" class="btn btn-neutral float-left" title="USGS dataretrieval Python Package get_dv() Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="USGS_dataretrieval_Measurements_Examples.html" class="btn btn-neutral float-right" title="USGS dataretrieval Python Package get_discharge_measurements() Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>